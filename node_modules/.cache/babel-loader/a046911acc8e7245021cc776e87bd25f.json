{"ast":null,"code":"var _jsxFileName = \"/Users/paolobonavera/docs/development/react-ld/react-training/src/components/textinput.js\",\n    _s = $RefreshSig$();\n\nimport { useCallback, useState } from \"react\";\nimport { names } from \"../config/config\";\nimport { Sentencer } from \"../functions/sentencer\";\nimport Droperiser from \"./droperiser\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst TextInput = () => {\n  _s();\n\n  const [formData, setFormData] = useState(initaliseValues());\n  const [formValidation, setFormValidation] = useState(initaliseValues());\n\n  function initaliseValues() {\n    return {\n      regione: \"\",\n      provincia: \"\",\n      comune: \"\",\n      unita_urbanistica: \"\",\n      valore: \"\"\n    };\n  }\n\n  const FormCreator = () => names.map(name => InputDivider(name));\n\n  function InputDivider(name) {\n    if (name.type === \"drop\") {\n      return DropDownCreator(name);\n    } else if (name.type === \"text\") {\n      return TextBoxCreator(name);\n    }\n  }\n\n  const DropDownCreator = name => /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Droperiser, {\n      handleChange: handleChange,\n      name: name,\n      value: formData[name.naid],\n      validation: formValidation[name.naid],\n      choices: DropDownFilter(name)\n    }, name.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 5\n  }, this);\n\n  const DropDownFilter = name => {\n    const filteredItems = [];\n    const prevObj = names[name.id - 2];\n\n    if (prevObj && name.refined && formData[prevObj.naid]) {\n      name.info.map(element => {\n        if (element.shortShow === formData[prevObj.naid] || element.shortShow === \"\") {\n          filteredItems.push(element);\n        }\n      });\n    } else {\n      name.info.map(element => {\n        filteredItems.push(element);\n      });\n    }\n\n    return filteredItems;\n  };\n\n  const TextBoxCreator = name => /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      value: formData[name.naid],\n      onChange: handleChange,\n      name: name.naid,\n      placeholder: Sentencer(name.naid)\n    }, name.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), formValidation[name.naid] && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"invalid\",\n      children: formValidation[name.naid]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 37\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n\n  const EmptyInputValidator = () => {\n    for (const key in formData) {\n      if (formData[key] === \"\" || formData[key] === \"-- Choose --\") {\n        formValidation[key] = \"*Enter this field\";\n      } else {\n        formValidation[key] = \"\";\n      }\n    }\n  };\n\n  const handleChange = event => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = event.target;\n    setFormData(prevFormData => {\n      return { ...prevFormData,\n        [name]: type === \"checkbox\" ? checked : value\n      };\n    });\n  };\n\n  const FinalValidation = () => {\n    let isValid = [];\n\n    for (const key in formValidation) {\n      if (formValidation[key] === \"\") {\n        isValid.push(true);\n      } else {\n        isValid.push(false);\n      }\n    }\n\n    if (isValid.every(element => element)) {\n      return;\n    } else {\n      return false;\n    }\n  };\n\n  const handleSubmit = useCallback(() => event => {\n    event.preventDefault();\n    EmptyInputValidator();\n\n    if (FinalValidation()) {\n      const rowData = JSON.parse(localStorage.getItem(\"data\")) || [];\n      rowData.push(formData);\n      console.log(rowData);\n      localStorage.setItem(\"data\", JSON.stringify(rowData));\n      setFormData(initaliseValues());\n    } else {\n      console.log(\"No\");\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit(),\n      children: FormCreator()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => console.log(formData),\n      children: \"Clickme\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 126,\n    columnNumber: 5\n  }, this);\n};\n\n_s(TextInput, \"p+j3E0A0sF52lbR8YedvumBGsCw=\");\n\n_c = TextInput;\nexport default TextInput;\n\nvar _c;\n\n$RefreshReg$(_c, \"TextInput\");","map":{"version":3,"names":["useCallback","useState","names","Sentencer","Droperiser","TextInput","formData","setFormData","initaliseValues","formValidation","setFormValidation","regione","provincia","comune","unita_urbanistica","valore","FormCreator","map","name","InputDivider","type","DropDownCreator","TextBoxCreator","handleChange","naid","DropDownFilter","id","filteredItems","prevObj","refined","info","element","shortShow","push","EmptyInputValidator","key","event","value","checked","target","prevFormData","FinalValidation","isValid","every","handleSubmit","preventDefault","rowData","JSON","parse","localStorage","getItem","console","log","setItem","stringify"],"sources":["/Users/paolobonavera/docs/development/react-ld/react-training/src/components/textinput.js"],"sourcesContent":["import { useCallback, useState } from \"react\"\r\nimport { names } from \"../config/config\"\r\nimport { Sentencer } from \"../functions/sentencer\"\r\nimport Droperiser from \"./droperiser\"\r\n\r\nconst TextInput = () => {\r\n  const [formData, setFormData] = useState(initaliseValues())\r\n  const [formValidation, setFormValidation] = useState(initaliseValues())\r\n\r\n  function initaliseValues() {\r\n    return {\r\n      regione: \"\",\r\n      provincia: \"\",\r\n      comune: \"\",\r\n      unita_urbanistica: \"\",\r\n      valore: \"\"\r\n    }\r\n  }\r\n\r\n  const FormCreator = () => (\r\n    names.map(name => InputDivider(name))\r\n  )\r\n\r\n  function InputDivider(name) {\r\n    if (name.type === \"drop\") {\r\n      return DropDownCreator(name)\r\n    } else if (name.type === \"text\") {\r\n      return TextBoxCreator(name)\r\n    }\r\n  }\r\n\r\n\r\n  const DropDownCreator = (name) => (\r\n    <div>\r\n      <Droperiser\r\n        key={name.id}\r\n        handleChange={handleChange}\r\n        name={name}\r\n        value={formData[name.naid]}\r\n        validation={formValidation[name.naid]}\r\n        choices={DropDownFilter(name)}\r\n      />\r\n    </div>\r\n  )\r\n\r\n  const DropDownFilter = (name) => {\r\n    const filteredItems = []\r\n    const prevObj = names[name.id - 2]\r\n    if (prevObj && name.refined && formData[prevObj.naid]) {\r\n      name.info.map(element => {\r\n        if (element.shortShow === formData[prevObj.naid] || element.shortShow === \"\") {\r\n          filteredItems.push(element)\r\n        }\r\n      })\r\n    } else {\r\n      name.info.map(element => { filteredItems.push(element) })\r\n    }\r\n    return filteredItems\r\n  }\r\n\r\n  const TextBoxCreator = (name) => (\r\n    <div>\r\n      <input\r\n        key={name.id}\r\n        type=\"text\"\r\n        value={formData[name.naid]}\r\n        onChange={handleChange}\r\n        name={name.naid}\r\n        placeholder={Sentencer(name.naid)}\r\n      />\r\n      {formValidation[name.naid] && <p className=\"invalid\">{formValidation[name.naid]}</p>}\r\n    </div>\r\n  )\r\n\r\n  const EmptyInputValidator = () => {\r\n    for (const key in formData) {\r\n      if (formData[key] === \"\" || formData[key] === \"-- Choose --\") {\r\n        formValidation[key] = \"*Enter this field\"\r\n      } else {\r\n        formValidation[key] = \"\"\r\n      }\r\n    }\r\n  }\r\n\r\n  const handleChange = (event) => {\r\n    const { name, value, type, checked } = event.target\r\n    setFormData(prevFormData => {\r\n      return {\r\n        ...prevFormData, [name]: type === \"checkbox\" ? checked : value\r\n      }\r\n    })\r\n  }\r\n\r\n  const FinalValidation = () => {\r\n    let isValid = []\r\n    for (const key in formValidation) {\r\n      if (formValidation[key] === \"\") {\r\n        isValid.push(true)\r\n      } else {\r\n        isValid.push(false)\r\n      }\r\n    }\r\n    if (isValid.every(element => element)) {\r\n      return\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n\r\n  const handleSubmit = useCallback(\r\n    () => (event) => {\r\n      event.preventDefault()\r\n      EmptyInputValidator()\r\n      if (FinalValidation()) {\r\n        const rowData = (JSON.parse(localStorage.getItem(\"data\")) || [])\r\n        rowData.push(formData)\r\n        console.log(rowData)\r\n        localStorage.setItem(\"data\", JSON.stringify(rowData))\r\n        setFormData(initaliseValues())\r\n      } else {\r\n        console.log(\"No\")\r\n      }\r\n    });\r\n\r\n  return (\r\n    <div>\r\n      <form onSubmit={handleSubmit()}>\r\n        {FormCreator()}\r\n      </form>\r\n      <button onClick={() => console.log(formData)}>Clickme</button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TextInput;"],"mappings":"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"},"metadata":{},"sourceType":"module"}